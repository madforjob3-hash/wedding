(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[548],{5384:function(e,s,a){Promise.resolve().then(a.bind(a,4969))},4969:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var t=a(7437),r=a(2265),n=a(6943),l=a(6410);let i={naver:"\uD83D\uDFE2",daum:"\uD83D\uDD35",directwedding:"\uD83D\uDC92",makemywedding:"\uD83D\uDC8D"},d={naver:"네이버",daum:"다음",directwedding:"다이렉트웨딩",makemywedding:"메이크마이웨딩"};function c(e){let{review:s}=e;return(0,t.jsx)("a",{href:s.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-white rounded-lg border border-gray-200 hover:border-rose-300 hover:shadow-md transition-all",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:i[s.source]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-500",children:d[s.source]}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:(e=>{let s=new Date(1e3*e.seconds),a=Math.floor((new Date().getTime()-s.getTime())/864e5);return 0===a?"오늘":1===a?"어제":a<7?"".concat(a,"일 전"):a<30?"".concat(Math.floor(a/7),"주 전"):"".concat(Math.floor(a/30),"개월 전")})(s.scrapedAt)})]}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-2",children:s.summary}),s.keywords.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:s.keywords.map((e,s)=>(0,t.jsxs)("span",{className:"text-xs px-2 py-1 bg-rose-50 text-rose-600 rounded-full",children:["#",e]},s))})]}),(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})}var o=a(7648),x=a(3145),m=a(257);function h(e){let{params:s}=e,[a,i]=(0,r.useState)(null),[d,h]=(0,r.useState)([]),[u,p]=(0,r.useState)(!0),[g,N]=(0,r.useState)(!1);async function f(){try{let e=await (0,n.QT)((0,n.JU)(l.db,"weddingHalls",s.id));e.exists()&&i({id:e.id,...e.data()});let a=(0,n.hJ)(l.db,"reviews"),t=(0,n.IO)(a,(0,n.ar)("hallId","==",s.id),(0,n.Xo)("scrapedAt","desc"),(0,n.b9)(50)),r=(await (0,n.PL)(t)).docs.map(e=>({id:e.id,...e.data()}));h(r)}catch(e){console.error("데이터 로드 실패:",e)}finally{p(!1)}}async function j(){if(a){N(!0);try{(await fetch("/api/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hallId:a.id,hallName:a.name})})).ok?(await f(),alert("후기를 성공적으로 업데이트했습니다!")):alert("후기 업데이트에 실패했습니다.")}catch(e){console.error("크롤링 실패:",e),alert("후기 업데이트 중 오류가 발생했습니다.")}finally{N(!1)}}}return((0,r.useEffect)(()=>{f()},[s.id]),u)?(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-20 text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-rose-500 border-t-transparent"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"로딩 중..."})]}):a?(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,t.jsxs)(o.default,{href:"/",className:"inline-flex items-center text-gray-600 hover:text-rose-600 mb-6",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"목록으로 돌아가기"]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden mb-8",children:[(0,t.jsx)("div",{className:"relative h-96",children:a.imageUrl?(0,t.jsx)(x.default,{src:a.imageUrl,alt:a.name,fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-200 text-gray-400",children:"이미지 준비 중"})}),(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:a.name}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-gray-600",children:[(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCCD"})," ",a.address]}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCDE"})," ",a.phone]}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDC65"})," 최대 ",a.capacity,"명"]}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCB0"})," ",a.priceRange]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["실시간 후기 ",(0,t.jsxs)("span",{className:"text-rose-600",children:["(",d.length,")"]})]}),(0,t.jsx)("button",{onClick:j,disabled:g,className:"px-6 py-2 bg-rose-500 text-white rounded-lg hover:bg-rose-600 disabled:bg-gray-400 transition-colors",children:g?"업데이트 중...":"후기 새로고침"})]}),0===d.length?(0,t.jsxs)("div",{className:"text-center py-20 bg-white rounded-lg",children:[(0,t.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"아직 등록된 후기가 없습니다."}),(0,t.jsx)("button",{onClick:j,className:"px-6 py-2 bg-rose-500 text-white rounded-lg hover:bg-rose-600",children:"후기 가져오기"})]}):(0,t.jsx)("div",{className:"space-y-4",children:d.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(c,{review:e}),(s+1)%5==0&&m.env.NEXT_PUBLIC_ADSENSE_CLIENT_ID&&(0,t.jsx)("div",{className:"my-6 p-4 bg-gray-100 rounded-lg text-center",children:(0,t.jsx)("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":m.env.NEXT_PUBLIC_ADSENSE_CLIENT_ID,"data-ad-slot":"YOUR_AD_SLOT_ID","data-ad-format":"auto","data-full-width-responsive":"true"})})]},e.id))})]}):(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-20 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"웨딩홀을 찾을 수 없습니다."}),(0,t.jsx)(o.default,{href:"/",className:"text-rose-600 hover:underline mt-4 inline-block",children:"홈으로 돌아가기"})]})}},6410:function(e,s,a){"use strict";a.d(s,{db:function(){return d}});var t=a(738),r=a(6943),n=a(257);let l={apiKey:n.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:n.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:n.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:n.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:n.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:n.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:n.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},i=0===(0,t.C6)().length?(0,t.ZF)(l):(0,t.C6)()[0],d=(0,r.ad)(i)}},function(e){e.O(0,[287,160,971,117,744],function(){return e(e.s=5384)}),_N_E=e.O()}]);